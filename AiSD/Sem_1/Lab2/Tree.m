n = 0:1000:100000;

xlim([0, 100000]);

Tree1 = 0:1000:100000;
AVLTree1 = [1, 10, 11, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17
    ];
RBTree1 = [1, 18, 20, 21, 22, 23, 23, 24, 24, 25, 25, 25, 25, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 32, 32
    ];



Tree2 = [1, 22, 24, 26, 27, 27, 29, 29, 29, 29, 29, 30, 31, 32, 32, 32, 32, 33, 33, 33, 33, 33, 33, 34, 34, 35, 35, 35, 35, 35, 35, 36, 36, 36, 36, 36, 36, 36, 37, 37, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 39, 40, 40
    ];
AVLTree2 = [1, 12, 13, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20
    ];
RBTree2 = [1, 13, 15, 15, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22
    ];

Tree1(1) = 1;
n(1) = 1;

line = n;
subN = n(2:end);
subN = [1,subN];
log2_n = log2(subN);
Up144log2_n = 1.44*log2(subN);
Up2log2_n = 2*log2(subN);

t = tiledlayout(2, 3);
t.TileSpacing = 'compact';
t.Padding = 'compact';

All = {{Tree1, AVLTree1, RBTree1},{Tree2, AVLTree2, RBTree2}};
Max = {line, Up144log2_n, Up2log2_n};
Name1 = {'По возрастанию ', 'Рандом '};
Name2 = {'BS Tree', 'AVL Tree', 'RB Tree'};

for i = 1:length(All)
    for j = 1:length(Max)
        nexttile  
        p = polyfit(log2(n), All{i}{j}, 1);
        pv = polyval(p,log2(n));
        fprintf('%s %.2f\n', Name2{j}, p(1))
        ylim([0, max(All{i}{j})*2]);
        hold on
        plot(n,Max{j}, "Color",'r','LineStyle','--');
        plot(n,log2_n, "Color",'g','LineStyle','--');
        plot(n,All{i}{j}, "Color",'b','LineStyle','none','Marker','o');
        plot(n,pv, "Color",'black','LineStyle','-.');
        legend({'Верхняя граница','Нижняя граница', 'Эксперемент'},'Location','northwest');
        ft = [Name1{i}, Name2{j}];
        title(ft);
        grid on;
        xlabel('n');
        ylabel('h');

        
    end



end





